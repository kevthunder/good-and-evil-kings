<% 
  options_prop = :options if options_prop.nil?
  add_label = "Add an option" if add_label.nil?
%>
<div id="options">
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Value</th>
        <th></th>
      </tr>
    </thead>
    <%= form.fields_for options_prop, :wrapper => false do |option_form| %>
      <tr class="fields">
        <td><%= option_form.text_field :name %></td>
        <td><%= option_form.text_field :val %></td>
        <td><%= option_form.link_to_remove "Remove" %></td>
      </tr>
    <% end %>
  </table>
  <p><%= form.link_to_add add_label, options_prop, :data => { :target => "#options table" }  %></p>
</div>