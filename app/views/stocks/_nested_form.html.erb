<% 
  stocks_prop = :stocks if stocks_prop.nil?
  add_label = "Add a stock" if add_label.nil?
%>
<div id="stocks">
  <table>
    <thead>
      <tr>
        <th>Qte</th>
        <th>Ressource</th>
        <th></th>
      </tr>
    </thead>
    <%= form.fields_for stocks_prop, :wrapper => false do |stock_form| %>
      <tr class="fields">
        <td><%= stock_form.number_field :qte %></td>
        <td><%= stock_form.collection_select(:ressource_id, Ressource.all, :id, :name) %></td>
        <td><%= stock_form.link_to_remove "Remove" %></td>
      </tr>
    <% end %>
  </table>
  <p><%= form.link_to_add add_label, stocks_prop, :data => { :target => "#stocks table" }  %></p>
</div>